<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.wizinno.apollo.app.domain.NetworkSpeedMapper" >
  <resultMap id="BaseResultMap" type="com.wizinno.apollo.app.domain.model.NetworkSpeed" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 15:43:55 CST 2017.
    -->
    <id column="user_id" property="userId" jdbcType="VARCHAR" />
    <id column="time_stamp" property="timeStamp" jdbcType="TIMESTAMP" />
    <result column="upload_maximum" property="uploadMaximum" jdbcType="DOUBLE" />
    <result column="upload_minimum" property="uploadMinimum" jdbcType="DOUBLE" />
    <result column="upload_avg" property="uploadAvg" jdbcType="DOUBLE" />
    <result column="down_maximum" property="downMaximum" jdbcType="DOUBLE" />
    <result column="down_minimum" property="downMinimum" jdbcType="DOUBLE" />
    <result column="down_avg" property="downAvg" jdbcType="DOUBLE" />
    <result column="app_packages" property="appPackages" jdbcType="VARCHAR" />
    <result column="net_type" property="netType" jdbcType="VARCHAR" />
    <result column="operator" property="operator" jdbcType="VARCHAR" />
    <result column="ssid" property="ssid" jdbcType="VARCHAR" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 15:43:55 CST 2017.
    -->
    delete from network_speed
    where user_id = #{userId,jdbcType=VARCHAR}
      and time_stamp = #{timeStamp,jdbcType=TIMESTAMP}
  </delete>
  <insert id="insert" parameterType="com.wizinno.apollo.app.domain.model.NetworkSpeed" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 15:43:55 CST 2017.
    -->
    insert into network_speed (user_id, time_stamp, upload_maximum, 
      upload_minimum, upload_avg, down_maximum, 
      down_minimum, down_avg, app_packages,net_type,operator,ssid
      )
    values (#{userId,jdbcType=VARCHAR}, #{timeStamp,jdbcType=TIMESTAMP}, #{uploadMaximum,jdbcType=DOUBLE},
      #{uploadMinimum,jdbcType=DOUBLE}, #{uploadAvg,jdbcType=DOUBLE}, #{downMaximum,jdbcType=DOUBLE},
      #{downMinimum,jdbcType=DOUBLE}, #{downAvg,jdbcType=DOUBLE}, #{appPackages,jdbcType=VARCHAR},
    #{netType,jdbcType=VARCHAR},#{operator,jdbcType=VARCHAR},#{ssid,jdbcType=VARCHAR}
      )
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.wizinno.apollo.app.domain.model.NetworkSpeed" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 15:43:55 CST 2017.
    -->
    update network_speed
    set upload_maximum = #{uploadMaximum,jdbcType=DOUBLE},
      upload_minimum = #{uploadMinimum,jdbcType=DOUBLE},
      upload_avg = #{uploadAvg,jdbcType=DOUBLE},
      down_maximum = #{downMaximum,jdbcType=DOUBLE},
      down_minimum = #{downMinimum,jdbcType=DOUBLE},
      down_avg = #{downAvg,jdbcType=DOUBLE},
      app_packages = #{appPackages,jdbcType=VARCHAR},
    net_type = #{netType,jdbcType=VARCHAR},
    operator = #{operator,jdbcType=VARCHAR},
    ssid = #{ssid,jdbcType=VARCHAR}
    where user_id = #{userId,jdbcType=VARCHAR}
      and time_stamp = #{timeStamp,jdbcType=TIMESTAMP}
  </update>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 15:43:55 CST 2017.
    -->
    select user_id, time_stamp, upload_maximum, upload_minimum, upload_avg, down_maximum, 
    down_minimum, down_avg, app_packages,net_type,operator,ssid
    from network_speed
    where user_id = #{userId,jdbcType=VARCHAR}
      and time_stamp = #{timeStamp,jdbcType=TIMESTAMP}
  </select>
  <select id="selectAll" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 15:43:55 CST 2017.
    -->
    select user_id, time_stamp, upload_maximum, upload_minimum, upload_avg, down_maximum, 
    down_minimum, down_avg, app_packages,net_type,operator,ssid
    from network_speed
  </select>


  <resultMap id="UserAndNetworksMap" type="com.wizinno.apollo.app.dto.UserAndNetworksDto" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Sep 21 13:51:35 CST 2017.
    -->
    <id column="user_id" property="userId" jdbcType="VARCHAR" />
    <id column="time_stamp" property="timeStamp" jdbcType="TIMESTAMP" />
    <result column="upload_maximum" property="uploadMaximum" jdbcType="DOUBLE" />
    <result column="upload_minimum" property="uploadMinimum" jdbcType="DOUBLE" />
    <result column="upload_avg" property="uploadAvg" jdbcType="DOUBLE" />
    <result column="down_maximum" property="downMaximum" jdbcType="DOUBLE" />
    <result column="down_minimum" property="downMinimum" jdbcType="DOUBLE" />
    <result column="down_avg" property="downAvg" jdbcType="DOUBLE" />
    <result column="app_packages" property="appPackages" jdbcType="VARCHAR" />
    <result column="mobile_num" property="mobileNum" jdbcType="VARCHAR" />
    <result column="u_name" property="uName" jdbcType="VARCHAR" />
    <result column="net_type" property="netType" jdbcType="DOUBLE" />
    <result column="operator" property="operator" jdbcType="VARCHAR" />
    <result column="ssid" property="ssid" jdbcType="VARCHAR" />
  </resultMap>
  <select id="getNetworksSpeeds" parameterType="com.wizinno.apollo.common.condition.NetworksSpeedCondition"
          resultMap="UserAndNetworksMap">
    select ns.user_id, ns.time_stamp, ns.upload_maximum, ns.upload_minimum, ns.upload_avg,
    ns.down_maximum, ns.down_minimum, ns.down_avg,ns.app_packages,u.mobile_num,u.u_name,ns.net_type,ns.operator,ns.ssid
    from network_speed ns
    LEFT JOIN user u ON ns.user_id=u.user_id
    <where>
      <if test="uName != null">AND u.u_name = #{uName,jdbcType=VARCHAR}</if>
      <if test="mobileNum != null">AND u.mobile_num = #{mobileNum,jdbcType=VARCHAR}</if>
      <if test="uploadMaximum != null">AND ns.upload_maximum >= #{uploadMaximum,jdbcType=DOUBLE}</if>
      <if test="downMaximum != null">AND ns.down_maximum >= #{downMaximum,jdbcType=DOUBLE}</if>
      <if test="operator != null">AND u.operator = #{operator,jdbcType=VARCHAR}</if>
      <if test="startTime != null">AND ns.time_stamp >= #{startTime,jdbcType=TIMESTAMP}</if>
      <if test="endTime != null"><![CDATA[AND ns.time_stamp < #{endTime,jdbcType=TIMESTAMP}]]></if>
    </where>
    order BY ns.time_stamp desc
    limit #{start,jdbcType=INTEGER}, #{size,jdbcType=INTEGER}
  </select>

  <select id="getNetworksSpeedsTotal" resultType="java.lang.Long" parameterType="com.wizinno.apollo.common.condition.NetworksSpeedCondition">
    select count(1)
    from network_speed ns
    LEFT JOIN user u ON ns.user_id=u.user_id
    <where>
      <if test="uName != null">AND u.u_name = #{uName,jdbcType=VARCHAR}</if>
      <if test="mobileNum != null">AND u.mobile_num = #{mobileNum,jdbcType=VARCHAR}</if>
      <if test="uploadMaximum != null">AND ns.upload_maximum >= #{uploadMaximum,jdbcType=DOUBLE}</if>
      <if test="downMaximum != null">AND ns.down_maximum >= #{downMaximum,jdbcType=DOUBLE}</if>
      <if test="operator != null">AND u.operator = #{operator,jdbcType=VARCHAR}</if>
      <if test="startTime != null">AND ns.time_stamp >= #{startTime,jdbcType=TIMESTAMP}</if>
      <if test="endTime != null"><![CDATA[AND ns.time_stamp < #{endTime,jdbcType=TIMESTAMP}]]></if>
    </where>
  </select>
</mapper>